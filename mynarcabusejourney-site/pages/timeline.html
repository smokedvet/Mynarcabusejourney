<!doctype html><html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Timeline</title><link rel="stylesheet" href="../assets/style.css">
</head><body>
<header class="site-header"><div class="container"><h1>Timeline</h1>
<nav class="nav"><a href="../index.html">Home</a><a href="about.html">About</a><a href="resources.html">Resources</a></nav></div></header>
<main class="container">
<section class="controls">
<input id="q" type="search" placeholder="Search dates, titles, details…">
<select id="tag"><option value="">All tags</option><option>law</option><option>family</option><option>therapy</option><option>healing</option><option>boundary</option><option>trigger</option><option>reset</option></select>
<button id="clear">Clear</button><span class="small" id="count">0 events</span>
</section>
<section id="list"></section>
</main>
<footer class="site-footer"><div class="container"><small class="small">Data: <code>data/timeline.json</code></small></div></footer>
<script>
async function load(){const r=await fetch('../data/timeline.json');const items=await r.json();window._items=items;render(items);}
function render(items){const q=(document.getElementById('q').value||'').toLowerCase().trim();const tag=(document.getElementById('tag').value||'').toLowerCase().trim();
const filtered=(items||[]).filter(it=>{const blob=((it.date||'')+' '+(it.title||'')+' '+(it.details||'')+' '+(it.tags||[]).join(' ')).toLowerCase();
const matchQ=!q||blob.includes(q);const tags=(it.tags||[]).map(t=>String(t).toLowerCase());const matchTag=!tag||tags.includes(tag);return matchQ&&matchTag;});
document.getElementById('count').textContent=filtered.length+' events';
document.getElementById('list').innerHTML=filtered.map(it=>{const tags=(it.tags||[]).map(t=>'<code>'+escapeHtml(t)+'</code>').join(' ');
return '<article class="event"><h3>'+escapeHtml(it.date)+' — '+escapeHtml(it.title||'')+'</h3>'+(it.details?'<p>'+escapeHtml(it.details)+'</p>':'')+(tags?'<p class="tags small">'+tags+'</p>':'')+(it.source?'<p class="small">Source: '+escapeHtml(it.source)+'</p>':'')+'</article>';}).join('')||'<p class="small">No events match your search.</p>';}
function escapeHtml(s){return String(s).replace(/[&<>"']/g,c=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#039;"}[c]))}
document.getElementById('q').addEventListener('input',()=>render(window._items||[]));document.getElementById('tag').addEventListener('change',()=>render(window._items||[]));
document.getElementById('clear').addEventListener('click',()=>{document.getElementById('q').value='';document.getElementById('tag').value='';render(window._items||[])});load();
</script>
</body></html>